# üöÄ StudX - –ó–ê–ü–£–°–ö –ù–ê –°–ï–†–í–ï–†–ï –ó–ê 15 –ú–ò–ù–£–¢

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ:
- **VPS —Å–æ–∑–¥–∞–Ω:** IP `157.230.21.54` (2 vCPU, 4GB RAM, 80GB SSD)
- **–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –≤ –ø–∞–ø–∫–µ `server-setup/`
- **DNS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:** –ê-–∑–∞–ø–∏—Å–∏ –¥–æ–ª–∂–Ω—ã —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ `157.230.21.54`

## üìã –ß–¢–û –î–ï–õ–ê–¢–¨ –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°:

### –®–∞–≥ 1: –ö–æ–ø–∏—Ä—É–µ–º –≤—Å–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä (2 –º–∏–Ω—É—Ç—ã)

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ /Users/mak/Documents/StudX/StudX
# –ö–æ–ø–∏—Ä—É–µ–º –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp -r ./* root@157.230.21.54:/tmp/studx-deploy/

# –ò–ª–∏ —á–µ—Ä–µ–∑ rsync (–ª—É—á—à–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤)
rsync -avz --progress ./ root@157.230.21.54:/tmp/studx-deploy/
```

### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@157.230.21.54
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫–∞–µ–º –≥–ª–∞–≤–Ω—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ (10 –º–∏–Ω—É—Ç)

```bash
cd /tmp/studx-deploy/server-setup
chmod +x *.sh
./first-run.sh
```

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤–µ—Å—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Å–æ—Ñ—Ç
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è studx
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç PostgreSQL –∏ Redis
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç Nginx
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç firewall
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –ø–µ—Ä–≤–∏—á–Ω—É—é –ë–î

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (2 –º–∏–Ω—É—Ç—ã)

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª —Å –ø–∞—Ä–æ–ª—è–º–∏
nano /var/www/studx/shared/.env

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∑–∞–ø–æ–ª–Ω–∏—Ç—å:
# - DB_PASSWORD (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
# - JWT_SECRET (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å: openssl rand -base64 32)
# - API –∫–ª—é—á–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)
```

### –®–∞–≥ 5: –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (3 –º–∏–Ω—É—Ç—ã)

```bash
cd /var/www/studx
./deploy.sh

# –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# - –°–∫–ª–æ–Ω–∏—Ä—É–µ—Ç –∫–æ–¥ –∏–∑ GitHub
# - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
# - –°–æ–±–µ—Ä–µ—Ç frontend
# - –ó–∞–ø—É—Å—Ç–∏—Ç backend —á–µ—Ä–µ–∑ PM2
```

### –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (2 –º–∏–Ω—É—Ç—ã)

```bash
cd /var/www/studx/server-setup
./setup-ssl.sh

# –°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º certbot
# Email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: —Ç–≤–æ–π email
# –°–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏: A (Agree)
```

### –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å–∏—Å—Ç–µ–º—ã
cd /var/www/studx/server-setup
./check-system.sh

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: "–°–ò–°–¢–ï–ú–ê –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–ê –ö –†–ê–ë–û–¢–ï!"
```

### –®–∞–≥ 8: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏

```bash
# –î–æ–±–∞–≤–ª—è–µ–º cron –∑–∞–¥–∞—á–∏
crontab -e

# –í—Å—Ç–∞–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ —Ñ–∞–π–ª–∞ crontab-config
# –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏ –≤—ã—Ö–æ–¥–∏–º
```

## üî• –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê:

1. **–û—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä:** https://studx.ru
2. **–î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å–∞–π—Ç** (–≤–æ–∑–º–æ–∂–Ω–æ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º SSL –ø–µ—Ä–≤—ã–µ –º–∏–Ω—É—Ç—ã)
3. **–ü—Ä–æ–≤–µ—Ä—å API:** https://studx.ru/api/health
4. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:** `pm2 logs`

## ‚ö†Ô∏è –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢:

### DNS –Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ DNS –æ–±–Ω–æ–≤–∏–ª—Å—è
nslookup studx.ru
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å IP: 157.230.21.54
# –ï—Å–ª–∏ –Ω–µ—Ç - –ø–æ–¥–æ–∂–¥–∏ 30 –º–∏–Ω—É—Ç (DNS –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
```

### –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å nginx
systemctl status nginx
# –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
systemctl restart nginx

# –ü—Ä–æ–≤–µ—Ä—å PM2
pm2 list
# –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –∑–∞–ø—É—â–µ–Ω
pm2 start /var/www/studx/ecosystem.config.js
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å PostgreSQL
systemctl status postgresql
# –ü—Ä–æ–≤–µ—Ä—å –ø–∞—Ä–æ–ª—å –≤ .env —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ë–î
grep DB_PASSWORD /var/www/studx/shared/.env
```

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ù–ê –°–ï–†–í–ï–†–ï:

```
/var/www/studx/
‚îú‚îÄ‚îÄ current/          # –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è (—Å–∏–º–ª–∏–Ω–∫)
‚îú‚îÄ‚îÄ releases/         # –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–ª–∏–∑–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ 20240120.../  # –†–µ–ª–∏–∑ —Å timestamp
‚îú‚îÄ‚îÄ shared/           # –û–±—â–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ .env          # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ uploads/      # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ logs/         # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ server-setup/     # –°–∫—Ä–∏–ø—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ ecosystem.config.js # PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ deploy.sh         # –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è

/var/backups/studx/   # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
/var/log/studx/       # –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
```

## üîê –í–ê–ñ–ù–´–ï –ü–ê–†–û–õ–ò (—Å–æ—Ö—Ä–∞–Ω–∏!):

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ —Ñ–∞–π–ª–µ `/root/studx-passwords.txt` –±—É–¥—É—Ç:
- –ü–∞—Ä–æ–ª—å –ë–î PostgreSQL
- –ü–∞—Ä–æ–ª—å Redis (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- SSH –∫–ª—é—á –¥–ª—è GitHub –¥–µ–ø–ª–æ—è

**–°–û–•–†–ê–ù–ò –ò–• –í –ë–ï–ó–û–ü–ê–°–ù–û–ï –ú–ï–°–¢–û!**

## üöÄ –î–ê–õ–¨–ù–ï–ô–®–ê–Ø –†–ê–ë–û–¢–ê:

### –î–µ–ø–ª–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:
```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
git add .
git commit -m "feat: –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è"
git push origin main

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /var/www/studx
./deploy.sh
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
./server-setup/check-system.sh

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 logs

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
pm2 monit
```

### –ë—ç–∫–∞–ø—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ):
- –ö–∞–∂–¥—É—é –Ω–æ—á—å –≤ 3:00
- –•—Ä–∞–Ω—è—Ç—Å—è 30 –¥–Ω–µ–π
- –ü–∞–ø–∫–∞: `/var/backups/studx/`

## ‚ú® –ì–û–¢–û–í–û!

–ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ:
1. –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ https://studx.ru
2. API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ /api
3. –ë—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—É—â–µ–Ω
5. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–í—Ä–µ–º—è –Ω–∞ –≤—Å–µ: ~15 –º–∏–Ω—É—Ç**

---

*–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `journalctl -xe` –∏–ª–∏ `pm2 logs`*